From d7728b04f59b5e9df52f5df1c6f51fbce4dd0977 Mon Sep 17 00:00:00 2001
From: "Haelwenn (lanodan) Monnier" <contact@hacktivis.me>
Date: Thu, 15 Feb 2024 09:50:41 +0100
Part-of: https://github.com/prysk/prysk/pull/239
Subject: [PATCH] pyproject.toml: Only include in sdist

https://projects.gentoo.org/python/guide/qawarn.html#stray-top-level-files-in-site-packages

For example, this is bogus and would mean project overwriting each others:
  /usr/lib/python3.11/site-packages/pyproject.toml
  /usr/lib/python3.11/site-packages/poetry.lock
  /usr/lib/python3.11/site-packages/README.rst
  /usr/lib/python3.11/site-packages/COPYING.txt
  /usr/lib/python3.11/site-packages/examples
---
 pyproject.toml | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

diff --git a/pyproject.toml b/pyproject.toml
index 6683ab5..3d65573 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -40,16 +40,16 @@ keywords = [
 repository = "https://github.com/Nicoretti/prysk"
 homepage = "https://www.prysk.net/"
 include = [
-    ".coveragerc",
-    "noxfile.py",
-    "poetry.lock",
-    "*.rst",
-    "*.txt",
-    "*.toml",
-    "docs/*",
-    "contrib/*",
-    "scripts/*",
-    "examples/*",
+    { path = ".coveragerc", format = "sdist" },
+    { path = "noxfile.py", format = "sdist" },
+    { path = "poetry.lock", format = "sdist" },
+    { path = "*.rst", format = "sdist" },
+    { path = "*.txt", format = "sdist" },
+    { path = "*.toml", format = "sdist" },
+    { path = "docs/*", format = "sdist" },
+    { path = "contrib/*", format = "sdist" },
+    { path = "scripts/*", format = "sdist" },
+    { path = "examples/*", format = "sdist" },
 ]
 exclude = [
     "contrib/PKGBUILD",
-- 
2.43.0

